# Lines configured by zsh-newuser-install
HISTFILE=~/.histfile
HISTSIZE=10000
SAVEHIST=10000000
TERM=xterm
setopt incappendhistory autocd extendedglob histignorespace histignoredups histreduceblanks histignorespace histnostore extendedhistory share_history
unsetopt beep nomatch notify

zstyle ':completion:*' group-name ''
zstyle ':completion:*' list-colors ${(s.:.)LS_COLORS}
zstyle ':completion:*' list-prompt %SAt %p: Hit TAB for more, or the character to insert%s
zstyle ':completion:*' max-errors 1 numeric
zstyle ':completion:*' menu select
zstyle ':completion:*' select-prompt %SScrolling active: current selection at %p%s
zstyle ':completion:*' squeeze-slashes true
zstyle ':completion:*' substitute 1

autoload -Uz compinit
compinit

autoload colors
colors
PS1='%0(?.'%{$fg[green]%}'.'%{$fg[red]%}' %? )[%!] %* %n@%m %~ %(!.%B#%b.$)'%{$reset_color%}' '
path=(/usr/local/sbin /usr/local/bin /usr/sbin /usr/bin /sbin /bin /usr/games .)

# ls aliases
if ls --color >/dev/null 2>/dev/null; then
    eval `dircolors -b`
    alias l='ls --color'
else
    alias l='ls -G'
fi
alias la='l -a'
alias ll='l -l'

autoload zsh-mime-setup
zsh-mime-setup
zstyle ':mime:*' flags needsterminal

# Set up mime types
for ext in xls ods odf;            do alias -s $ext=soffice; done
for ext in djvu ps pdf;           do alias -s $ext=apvlv; done


function title() {
  # escape '%' chars in $1, make nonprintables visible
  a=${(V)1//\%/\%\%}

  # Truncate command, and join lines.
  a=$(print -Pn "%40>...>$a" | tr -d "\n")

  case $TERM in
  screen)
    print -Pn "\ek$a:$3\e\\"      # screen title (in ^A")
    ;;
  xterm*|rxvt)
    print -Pn "\e]2;$2 | $a:$3\a" # plain xterm title
    ;;
  esac
}

# precmd is called just before the prompt is printed
function precmd() {
  title "zsh" "%55<...<%~"
}

# preexec is called just before any command line is executed
function preexec() {
  title "$1" "%35<...<%~"
}


# Extended history viewing
alias history='history 500'

# Nice aliases
alias -g @='&> /dev/null &!'
alias untar='tar -xvvf'
alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'
alias rgrep='rgrep --color=auto'
function music-random () {
    bash -c "mplayer `ls --color=none -Q | sort -R | sed 's/"$/" \\\\/g'`"
}
export PATH=$HOME/stuff/texlive/bin/i386-linux:${PATH}
export PATH=$HOME/stuff/mathematica/bin:${PATH}
export PATH=$HOME/stuff/matlab/bin:${PATH}
export PATH=$HOME/.android-sdk-linux/tools:${PATH}
export PATH=$HOME/.android-sdk-linux/platform-tools:${PATH}
export PATH=$HOME/code/python:${PATH}
export PATH=/opt/altera/quartus/bin/:${PATH}
export PATH=$HOME/.cabal/bin:${PATH}
export PATH=$HOME/.local/bin:${PATH}

export PATH=/data/seq/seq_pipeline_annex/tools/Linux/bwa-0.7.3a:${PATH}
export PATH=/opt/openlava-2.0/bin:${PATH}
export PATH=/opt/openlava-2.0/etc:${PATH}
export LSF_ENVDIR=/opt/openlava-2.0/etc

export PYTHONSTARTUP=$HOME/.vim/foreign/python/rc.py

alias incognito='google-chrome --incognito'
alias matlab='matlab -nodesktop -nosplash -glnx86'

alias latexclean='rm *.log *.aux *.pyg *.bbl *.blg *.out 2> /dev/null'
alias haskellclean='rm *.o *.hi'
alias beamerclean='rm *.out *.log *.aux *.nav *.snm *.toc'

if [[ -d ~/env ]]; then
    source ~/env/bin/activate
fi

source ~/.vim/foreign/zsh/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
source ~/.vim/foreign/zsh/zsh-history-substring-search/zsh-history-substring-search.zsh
source ~/.vim/foreign/zsh/zle_vi_visual.zsh

# bind UP and DOWN arrow keys
for keycode in '[' '0'; do
    bindkey "^[${keycode}A" history-substring-search-up
    bindkey "^[${keycode}B" history-substring-search-down
done
unset keycode

# bind P and N for EMACS mode
bindkey -M emacs '^P' history-substring-search-up
bindkey -M emacs '^N' history-substring-search-down

# bind k and j for VI mode
bindkey -M vicmd 'k' history-substring-search-up
bindkey -M vicmd 'j' history-substring-search-down

bindkey -v
bindkey -M viins '^r' history-incremental-search-backward
bindkey -M vicmd '/' history-incremental-search-backward
bindkey -M viins '^a' beginning-of-line
bindkey -M vicmd '^a' beginning-of-line
bindkey -M viins '^e' end-of-line
bindkey -M vicmd '^e' end-of-line
bindkey -M viins '^k' kill-line
bindkey -M vicmd '^k' kill-line

export PATH=${PATH}:$HOME/.vim/foreign/zsh/fasd
eval "$(fasd --init auto)"
alias py='python'
alias v='f -e vim'
alias j='fasd_cd -d'
