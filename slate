# Configurations.
config defaultToCurrentScreen true
config nudgePercentOf screenSize
config resizePercentOf screenSize
config modalEscapeKey esc
config windowHintsRoundedCornerSize 50
config focusCheckWidthMax 200
config focusPreferSameApp true

# Use one modal key to activate all bindings.
# Allow using shift with it in order to avoid toggling.
alias modal alt,esc:toggle
alias unmodal alt,shift

# Relaunch Slate easily
bind r:${modal} relaunch

# Window Hints
alias hintKeys fjru
bind h:${unmodal} hint ${hintKeys}
bind h:${modal} hint ${hintKeys}

# Move windows to half-screens.
alias size bar-resize:screenSize
bind w:${modal} push up     ${size}Y/2
bind s:${modal} push down   ${size}Y/2
bind a:${modal} push left   ${size}X/2
bind d:${modal} push right  ${size}X/2
bind m:${modal} chain push left  ${size}X/2 | push up  ${size}Y/2 | push right  ${size}X/2 | push down  ${size}Y/2

# Move windows to quarter-screens.
alias quarter resize:screenSizeX/2;screenSizeY/2
bind q:${modal} corner top-left      ${quarter}
bind e:${modal} corner top-right     ${quarter}
bind z:${modal} corner bottom-left   ${quarter}
bind c:${modal} corner bottom-right  ${quarter}
bind n:${modal} chain corner top-left ${quarter} | corner top-right ${quarter} | corner bottom-left   ${quarter} | corner bottom-right  ${quarter}

# Maximize.
bind x:${modal} corner top-left resize:screenSizeX;screenSizeY
bind x:${unmodal} corner top-left resize:screenSizeX;screenSizeY

# Open Vim easily.
bind v:${modal} shell path:~/ '/usr/local/bin/mvim'

# Reply to iMessages.
# alias imessage-location 1866,52
# bind i:${unmodal} shell path:~/ '/usr/local/bin/cliclick -r c:${imessage-location}'

# Move windows to different spaces.
alias mouse-hold '/usr/bin/osascript /users/silver/dev/utils/winhold.applescript'
bind j:${unmodal} shell path:~/ ${mouse-hold}

# Move quickly to applications I care about.
bind i:${unmodal} focus "iTerm"
bind f:${unmodal} focus "Firefox"
bind v:${unmodal} focus "MacVim"
bind s:${unmodal} focus "Skype"
bind k:${unmodal} focus "Skim"
bind m:${unmodal} focus "Messages"
bind w:${unmodal} focus "Mathematica"
bind p:${unmodal} focus "Pandora"
bind g:${unmodal} focus "Google Chrome"
bind u:${unmodal} focus "Universal Translator"
bind c:${unmodal} focus "Calendar"
bind y:${unmodal} focus "Colloquy"
bind r:${unmodal} focus "Preview"
bind t:${unmodal} focus "Reminders"
bind a:${unmodal} focus "Anki"

alias select-buddies '/usr/bin/osascript /users/silver/dev/utils/buddies.applescript'
bind b:${unmodal} shell path:~/ ${select-buddies}

# Airmail is weird.
alias select-gmail '/usr/bin/osascript /users/silver/dev/utils/inbox.applescript'
bind a:${unmodal} shell path:~/ ${select-gmail}

# Allow undoing some operations.
bind z:${modal} undo

# Snapshots!
bind f1:${modal} snapshot snap1 save-to-disk
bind f2:${modal} snapshot snap2 save-to-disk
bind f3:${modal} snapshot snap3 save-to-disk
bind f4:${modal} snapshot snap4 save-to-disk
bind 1:${modal} activate-snapshot snap1
bind 2:${modal} activate-snapshot snap2
bind 3:${modal} activate-snapshot snap3
bind 4:${modal} activate-snapshot snap4

# Toggle which monitor something is on.
# This sadly has the effect of maximizing it as well, but not sure how to get around that.
bind f:${modal} throw  previous resize

# Quickly set up split screens in Firefox.
##########################################
# Note that this is a huge hack!
#
# We use split-firefox to split firefox and copy the URL.
alias split-firefox '/usr/bin/osascript /users/silver/dev/utils/split-firefox.applescript'

# We use paste-firefox to paste the URL into the new firefox.
alias paste-firefox '/usr/bin/osascript /users/silver/dev/utils/paste-firefox.applescript'

# Steps:
# 1. Split firefox (waiting for it to finish splitting)
# 2. Focus the back window (old one), put it on the right.
# 3. Focus the other window (new one), put it on the left.
# 4. Paste URL (copied in split) to new window.
bind ]:${modal} sequence shell path:~/ wait ${split-firefox} | focus behind > push right ${size}X/2 | focus left > push left ${size}X/2 | focus right | shell path:~/ wait ${paste-firefox}
##########################################
